{% extends "base.html" %}

{% block css %}
  {% load static %}
  <link rel="stylesheet" href="{% static "css/estilos.css" %}">
{% endblock %}

{% block titulo %}
    <title>Detalle de producto</title>
{% endblock %}

{% block contenido %}
{# Informacion del producto a comprar #}
<div class="container">
  <ul class="nav nav-tabs">
    <li class="nav-item">
      <a id="ver_perfil_tienda" class="nav-link" href="{% url 'tienda:verifica_seguidor' detalle_producto.mayorista.id %}">Informacion<br>de Vendedor</a>
    </li>
    <li class="nav-item">
      <a id="ver_detalle_producto" class="nav-link active" href="#">Detalle <br> producto</a>
    </li>
    <li class="nav-item">
      <input id="mayo" value="{{ detalle_producto.mayorista.id }}" type="hidden">{# servira para capturar el id del proveedor #}
      <a id="ver_tienda_prove" class="nav-link" href="{% url 'tienda:prod_all' %}">Tienda</a>
    </li>
  </ul>
</div>
{# tienda y listado de productos de ese mayorista#}
<div id="ver_tienda" class="container visible">
  <div class="row">
    <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
      <form id="buscar" action="{% url 'tienda:prod_search' %}"  method="POST">
        {% csrf_token %}
        <input id="prove" type="hidden" name="prove_id" value="{{ detalle_producto.mayorista.id }}">
        <input id="clave" type="text">
        <button class="btn btn-primary" name="clave">Buscar</button>
      </form>
    </div>
  </div>
  <div class="row">{# aqui se mostrara todo el contenido de la tienda cuando el usuario le de en la opcion tienda arriba #}
      <div class="container-fluid">
          <div id="listado" class="row row-cols-5 row-cols-sm-1 row-cols-md-1 row-cols-lg-4">
              {# se mostrara todo el contenido de la tienda con javascript #}
          </div>
    </div>
</div> 
</div>
{# informacion del perfil de la tienda #}
<div id="perfil_tienda" class="container visible">{# la clase visible oculta inicialmente el div #}
    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
        <div class="card" style="width: 35rem;">
          <img src="{{ MEDIA_URL }}{{ detalle_producto.mayorista.foto_perfil }}" class="card-img-top" alt="">
          <div class="card-body">
            <h5 class="card-title">{{ detalle_producto.mayorista.nombre_empresa }}</h5>
            <p class="card-text">{{ detalle_producto.mayorista.objetivo }}</p>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item"><h5>Registrado desde:</h5>{{ detalle_producto.mayorista.user.date_joined }}</li>
            <li class="list-group-item"><h5>Seguidores</h5><p id="numero_amigos"></p></li>
            <li class="list-group-item"><a href="{% url 'tienda:nuevo_seguidor' detalle_producto.mayorista.id %}" id="btnSeguir" class="btn btn-primary active" >Seguir</a></li>
          </ul>
        </div> 
      </div>
    </div>
</div>
<div id="producto_detalle" class="container">
    <div class="row">
        <div class="col-12">
            <center><h1>Informacion del Producto</h1></center>
        </div>
    </div>
    <div class="row">{#dividiendo la dila en 2#}
        <div class="col-md-6 col-lg-6 col-xl-6">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <img id="foto_producto" src="{{ MEDIA_URL }}{{ detalle_producto.foto_producto1 }}" width="500px" height="300px" alt="">{# muestra imagen del producto #}
                    </div>
                </div>
                <div class="row">{# dividiendo la fila en 4#}
                    <div class="col-md-4 col-lg-4 col-xl-4">
                        {# imagen en miniatura 1#}
                        <div id="foto1" class="card" style="width: 5rem;">
                            <img class="foto" src="{{ MEDIA_URL }}{{ detalle_producto.foto_producto1 }}" class="card-img-top" width="80px" height="80" alt="...">
                        </div>
                    </div>
                    <div class="col-md-4 col-lg-4 col-xl-4">
                        {# imagen en miniatura 2#}
                        <div id="foto2" class="card" style="width: 5rem;">
                            <img class="foto" src="{{ MEDIA_URL }}{{ detalle_producto.foto_producto2 }}" class="card-img-top" width="80px" height="80" alt="...">
                        </div>
                    </div>
                    <div class="col-md-4 col-lg-4 col-xl-4">
                        {# imagen en miniatura 3#}
                        <div id="foto3" class="card" style="width: 5rem;">
                            <img class="foto" src="{{ MEDIA_URL }}{{ detalle_producto.foto_producto3 }}" class="card-img-top" width="80px" height="80" alt="...">
                        </div>
                    </div>
                </div>
                <div style="margin-top: 20px; " class="row">
                  <div class="col-md-6 col-lg-6 col-xl-6">
                    <div>
                      <a href="{% url 'tienda:agregar_cesta' detalle_producto.id %}" class="btn btn-primary">Agregar a Cesta</a>
                      <a href="{% url 'tienda:reg_venta' detalle_producto.id  %}" class="btn btn-primary">Comprar</a>
                    </div>
                  </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-6 col-xl-6">
            <div class="container">
                <div class="list-group">
                    <a href="#" class="list-group-item list-group-item-action active">
                      <div class="d-flex w-100 justify-content-between">
                        <h5>Descripcion del producto</h5>
                      </div>
                    </a>
                    <a href="#" class="list-group-item list-group-item-action">
                      <div class="d-flex w-100 justify-content-between">
                        <h5>Vendedor</h5>
                      </div>
                      <p class="mb-1">{{ detalle_producto.mayorista }}</p>
                    </a>
                    <a href="#" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                          <h5>Producto</h5>
                        </div>
                        <p class="mb-1">{{ detalle_producto.producto }}</p>
                      </a>
                      <a href="#" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                          <h5>Descripcion</h5>
                        </div>
                        <p class="mb-1">{{ detalle_producto.info_producto }}</p>
                      </a>
                      <a href="#" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                          <h5>Cantidad disponible</h5>
                        </div>
                        <p class="mb-1">{{ detalle_producto.cantidad}} unidades</p>
                      </a>
                      <a href="#" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                          <h5>Precio por unidad</h5>
                        </div>
                        <p class="mb-1">${{ detalle_producto.precio_unitario}}</p>
                      </a>
                      <a href="#" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                          <h5>Costo de Envio</h5>
                        </div>
                        <p class="mb-1">${{ detalle_producto.costo_envio }}</p>
                      </a>
                      <a href="#" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                          <h5>Medio de Env√≠o</h5>
                        </div>
                        <p class="mb-1">{{ detalle_producto.medio_de_envio}}</p>
                      </a>
                      <a href="#" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                          <h5>Categoria</h5>
                        </div>
                        <p class="mb-1">{{ detalle_producto.categoria}}</p>
                      </a>
                  </div>
            </div>
        </div>
    </div>
    <div class="row">
      <div class="col-12" id="comentarios">
        {% if list_coment %}{# verificando si hay datos o si existe list_coment que devuelve todos los comentarios dque los clientes han hecho del producto #}
          {% for com in list_coment %}
              <p class="msj" id="c{{ com.id }}">{{ com.cliente }}<br>{{ com.puntaje }}<br>{{ com.comentario}}<br><a class="del_coment" id="cc{{ com.id }}" href="{% url 'tienda:del_coment' com.id %}">Eliminar</a></p>
          {% endfor %}
        {% else %}
          <p id="sin_coment">No hay comentarios aun.</p>
        {% endif %}
      </div>
      <form id="comentar" action="{% url 'tienda:w_coment' %}" method="POST">
        <input id="prod_id" type="hidden" name="producto_id" value="{{ producto_id }}"> 
        <p>
          <input type="radio" name="puntaje" value="1" id="">
          <input type="radio" name="puntaje" value="2" id="">
          <input type="radio" name="puntaje" value="3" id="">
          <input type="radio" name="puntaje" value="4" id="">
          <input type="radio" name="puntaje" value="5" id="">
        </p>
        <textarea name="coment" id="cmt" cols="100" rows="3">

        </textarea>
        <button class="btn btn-primary" type="submit">Comentar</button>
      </form>
    </div>
</div>
{% endblock %}

{% block script %}
    {% load static %}
    <script src="{% static "js/appProducto.js" %}"></script>
{% endblock %}