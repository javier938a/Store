{% extends "base.html" %}

{% block item %}
    <ul class="navbar-nav mr-auto nav-tabs">
            <li class="nav-item">
                {% if user.is_authenticated %}
                    {% ifequal user.tipo_usuario_id.tipo_usuario 'Proveedor'  %}
                        {% if id_prove %}
                            <a class="nav-link" href="{% url 'tienda:listar_prod' id_prove %}">Productos</a>
                        {% endif %}
                    {% endifequal %}
                {% endif %}
            </li>
            <li class="nav-item">
                {% if user.is_authenticated %}{# verificando que el usuario este autenticado para colocar iten de registrar #}
                    {% ifequal user.tipo_usuario_id.tipo_usuario 'Cliente' %}{# verificando si el tipo de usuario sea cliente para ubicar la opcion de cesta en el menu #}    
                        {% if id_cli %}
                                <a class="nav-link" href="{% url 'tienda:list_cesta' id_cli %}">Cesta</a>    
                        {% endif %}
                    {% endifequal %}
                    {% ifequal user.tipo_usuario_id.tipo_usuario 'Proveedor' %}{# en dado caso no se cliente, sera proveedor y se verifica para ubicar por cesta las ventas de ese proveedor #}
                        {% if id_prove %}
                            <a class="nav-link" href="{% url 'tienda:list_venta' id_prove %}">Ventas</a>
                        {% endif %}
                    {% endifequal %}
                {% else %}{# en dado caso de que no este autenticado no esta registrado se procede a poner el iten de registrar #}
                    <a id="registrar" class="nav-link" href="{% url 'tienda:registrar' %}" tabindex="-1" aria-disabled="true">Registrarse</a>
                {% endif %}
            </li>
            <li class="nav-item">
                {% if user.is_authenticated %}
                    {% ifequal user.tipo_usuario_id.tipo_usuario 'Cliente' %}
                        {% if id_cli %}{# verificando que exista el id del cliente #}
                            <a class="nav-link" href="/superStore/perfil_info/{{ user.id }}/Cliente">Perfil <br> {{ user.username }} </a> 
                        {% else %}
                            <a class=" nav-link" href="{% url 'tienda:perfil' user.id %}">Perfil <br> {{ user.username }}</a>
                        {% endif %}                        
                    {% endifequal %}
                    {% ifequal user.tipo_usuario_id.tipo_usuario 'Proveedor' %}
                        {% if id_prove %}
                            <a class="nav-link" href="/superStore/perfil_info/{{ user.id }}/Proveedor">Perfil <br> {{ user.username }} </a>
                        {% else %}
                            <a class="nav-link" href="{% url 'tienda:reg_provee' user.id %}">Perfil <br> {{ user.username }}</a>
                        {% endif %}
                    {% endifequal %}
                {% else %}
                    <a class="nav-link" href="{% url 'tienda:login' %}">Identificate</a>
                {% endif %}
            </li>

        {% block autenticacion %}
            {# anulando los elementos de autenticacion #}
        {% endblock %}
    </ul>
{% endblock %}

{% block logout %}
    {% if user.is_authenticated %}
        <a class="btn btn-danger" href="{% url 'tienda:logout' %}">Cerrar Sesi√≥n</a> 
    {% endif %}
{% endblock %}


{% block categoria %}
    <div class="row">{# definiendo columna #}
        {% if cate_list %}
                <div class="jumbotron jumbotron-fluid">
                    <div class="container-fluid">
                        <div class="row row-cols-5 row-cols-md-4 row-cols-lg-4">
                            {% for cate in cate_list %}
                                <div class="col mb-4">
                                <div class="card">
                                    <a href="{% url 'tienda:sub_categoria' cate.id %}"><img src=" {{ MEDIA_URL }}{{ cate.icono }}" width="100px" height="200px" class="card-img-top" alt="..."></a>
                                    <div class="card-body">
                                        <h5 class="card-title">{{ cate.categoria }}</h5>
                                    </div>
                                </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
        {% else %}
            <p>No hay categorias que mostrar</p>
        {% endif %}
{% endblock %}
{# se mostraran todas las ventas de los usuarios #}
{% block ventas %}
    <div class="row">
        <div class="col-sm-6">
        <div class="card">
            <div class="card-body">
            <h5 class="card-title">Special title treatment</h5>
            <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
            </div>
        </div>
        </div>
        <div class="col-sm-6">
        <div class="card">
            <div class="card-body">
            <h5 class="card-title">Special title treatment</h5>
            <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
            </div>
        </div>
        </div>
    </div> 

{% endblock %}

{% block script %}

    {% load static %}{# cargando el recurso de la carpeta estatica #}
    <script src="{% static "js/store.js" %}"></script>{# llamando al archivo js principal que se encarga de gestionar eventos #}

{% endblock %}